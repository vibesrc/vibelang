// Test impl blocks and method calls

struct Point {
    x: i64
    y: i64
}

impl Point {
    fn new(x: i64, y: i64) -> Point {
        return Point { x: x, y: y }
    }

    fn get_x(&self) -> i64 {
        return self.x
    }

    fn get_y(&self) -> i64 {
        return self.y
    }

    fn add(&self, other: &Point) -> i64 {
        return self.x + other.x + self.y + other.y
    }
}

fn main() -> i64 {
    let p1 = Point { x: 10, y: 20 }
    let p2 = Point { x: 3, y: 4 }

    let x = p1.get_x()
    if x != 10 {
        return 1
    }

    let y = p1.get_y()
    if y != 20 {
        return 2
    }

    // Test method call with argument
    let sum = p1.add(&p2)

    // Expected: 10 + 3 + 20 + 4 = 37
    if sum != 37 {
        return 3
    }

    return 0
}
